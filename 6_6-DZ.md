**1**

 a) Найти идентификатор операции 
 ```buildoutcfg
  db.aggregate( [
       { $currentOp : { allUsers: true } },
       { $match : <filter condition> } // Optional.  Specify the condition to find the op.
    ] )
```
Использовать ``db.killOp(<opId>)`` с указанием найденной до этого операции.

 б) Для поиска проблем можно включить мониторинг идущий с MongoDB ``db.enableFreeMonitoring()``, чтобы посмотреть нагрузку на сервер.
    Можно использовать метод ``.explain("executionStats")`` для конкретного запроса, который покажет статистику запроса и вызов ``db.currentOp({"secs_running":{$gte:}})`` для просмотра проблемных запросов.
   Может быть нехватка места на диске, большое количество подключений (можно увеличить количество шард).
   Неправильная структура БД или индексации.
 
**2**

* Отключить huge page ``echo never > /sys/kernel/mm/transparent_hugepage/enabled``.
* Посмотреть блокировки slow команд с помощью ``redis- cli SLOWLOG GET N ``
* Оптимизировать сеть TCP/IP.
* Возможно есть внутренняя задержка VM. Можно измерить задержку с помощью команды ``redis-cli --intrinsic-latency 100``

**2(дополнение)**
Как вы думаете, в чем может быть проблема?

Думаю проблема в задержке среды в которой запускается redis, с увеличением реплик нагрузка на систему растет и растет время внутренних задержек, тем самым время ttl с истекшим ключем растет. В конечном счете клиент при запросе блокирует запись.
(Если я неправ, просьба направить в нужное русло)

**3**

* Может быть из-за нестабильного подключения по истечению ``connect_timeout``, можно увеличить значение.
* Большое значение BLOB, превышающий параметр ``max_allowed_packet`` (на клиенте и сервере увеличить этот параметр)

**4**

OOM-Killer уничтожает процесс PostgreSQL из-за нехватки памяти. Необходимо скорректировать память для работы системы.

**4.доп**

Для решения проблемы, можно изменить значение ``vm.overcommit_memory`` равным 2 (работать без overcommit), что может помочь в данной ситуации, но лучше всего добавить оперативной памяти системе.
(Больше не нашел ничего что можно сделать в по данному вопросу)
